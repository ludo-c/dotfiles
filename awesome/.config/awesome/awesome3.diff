16a17,29
> -- start pulseaudio if not already started (before require "volume")
> os.execute("pulseaudio --start")
> require("autostart")
> require("volume")
> require("lfs")
> require("vicious")
> require("utils")
> 
> if lfs.attributes(os.getenv("HOME") .. "/.at_work") then
>     -- Get notifications on screen 1 (left one at work)
>     naughty.config.defaults.screen = 1
> end
> 
46a60,61
> -- change it with:
> -- (debian/ubuntu) sudo update-alternatives --config x-terminal-emulator
61c76
<     awful.layout.suit.floating,
---
>     --awful.layout.suit.floating,
71c86
<     awful.layout.suit.max.fullscreen,
---
>     --awful.layout.suit.max.fullscreen,
89c104,106
<     tags[s] = awful.tag({ 1, 2, 3, 4, 5, 6, 7, 8, 9 }, s, layouts[1])
---
>     --tags[s] = awful.tag({ 1, 2, 3, 4, 5, 6, 7, 8, 9 }, s, layouts[1])
>     --tags[s] = awful.tag({ "☠", "⌥", "✇", "⌤", "⍜", "✣", "⌨", "⌘", "☕" }, s, layouts[1])
>     tags[s] = awful.tag({ "➊", "➋", "➌", "➍", "➎", "➏", "➐", "➑", "➒" }, s, layouts[1])
118a136,178
> if lfs.attributes(os.getenv("HOME") .. "/.laptop") then
>     -- http://askubuntu.com/questions/611350/need-battery-applet-for-awesome-wm-and-ubuntu-14-04
>     batterywidget = wibox.widget.textbox()
>     battery_status(batterywidget)
>     batterywidgettimer = timer({ timeout = 15 })
>     batterywidgettimer:connect_signal("timeout", function() battery_status(batterywidget) end)
>     batterywidgettimer:start()
> end
> 
> -- Volume widget
> volume_widget = create_volume_widget()
> 
> -- naugthy notification indicator
> local naugthy_widget = wibox.widget.textbox()
> 
> -- proxy socks status
> local socks_widget = wibox.widget.textbox()
> socks_widget:set_text("socks status |")
> socks_widget:buttons (awful.util.table.join (
>       awful.button ({}, 1, function() check_tunnel(socks_widget, "socks.sh") end),
>       awful.button ({}, 3, function() check_tunnel(socks_widget, "socks.sh") end)
> ))
> -- show the good status immediatly
> check_tunnel(socks_widget, "socks.sh")
> socks_widget_timer = timer({ timeout = 15 })
> socks_widget_timer:connect_signal("timeout", function() check_tunnel(socks_widget, "socks.sh") end)
> socks_widget_timer:start()
> 
> -- Initialize widget RAM
> local memwidget = wibox.widget.textbox()
> -- vicious.register(memwidget, vicious.widgets.mem, "$1% ($2MB/$3MB)  ", 5)
> vicious.register(memwidget, vicious.widgets.mem, "RAM:$1% ", 5)
> 
> -- Initialize widget
> local cpuwidget = awful.widget.graph()
> -- Graph properties
> cpuwidget:set_width(50)
> cpuwidget:set_background_color("#494B4F")
> cpuwidget:set_color("#FF5656")
> cpuwidget:set_stack_colors({ "#FF5656", "#88A175", "#AECF96" })
> -- Register widget
> vicious.register(cpuwidget, vicious.widgets.cpu, "$1")
> 
197c257,263
<     if s == 1 then right_layout:add(wibox.widget.systray()) end
---
>     right_layout:add(socks_widget)
>     right_layout:add(memwidget)
>     right_layout:add(cpuwidget)
>     if lfs.attributes(os.getenv("HOME") .. "/.laptop") then
>         right_layout:add(batterywidget)
>     end
>     if s == naughty.config.defaults.screen then right_layout:add(wibox.widget.systray()) end
207a274,276
>     right_layout:add(naugthy_widget)
> 
>     right_layout:add(volume_widget)
276a346,385
> 
> 
> 
>     -- custom hotkeys
>     awful.key({ modkey,           }, "a", function () awful.client.cycle(true, mouse.screen)  end),
>     awful.key({ modkey, "Shift"   }, "a", function () awful.client.cycle(false, mouse.screen)  end),
>     awful.key({ modkey,           }, "s", function () awful.util.spawn("xfce4-appfinder") end),
> 
>     awful.key({ }, "XF86AudioRaiseVolume", function () inc_volume(volume_widget) end),
>     awful.key({ }, "XF86AudioLowerVolume", function () dec_volume(volume_widget) end),
>     awful.key({ }, "XF86AudioMute", function () mute_volume(volume_widget) end),
>     awful.key({ }, "XF86AudioPrev", function () awful.util.spawn("qdbus org.mpris.MediaPlayer2.clementine /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Previous") end),
>     awful.key({ }, "XF86AudioStop", function () awful.util.spawn("qdbus org.mpris.MediaPlayer2.clementine /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Stop") end),
>     awful.key({ }, "XF86AudioPlay", function () awful.util.spawn("qdbus org.mpris.MediaPlayer2.clementine /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.PlayPause") end),
>     awful.key({ }, "XF86AudioNext", function () awful.util.spawn("qdbus org.mpris.MediaPlayer2.clementine /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Next") end),
>     awful.key({ }, "Print", function () awful.util.spawn("scrot -zu") end),
> 
>     awful.key({ modkey, "Shift"   }, "i", function () awful.util.spawn("firefox -P proxy") end),
>     awful.key({ modkey,           }, "i", function () awful.util.spawn("firefox -P default") end),
>     awful.key({ modkey, "Mod1"    }, "i", function () awful.util.spawn("gnome-calculator") end), -- mod + altG
>     --awful.key({ modkey,           }, "e", function () awful.util.spawn("thunar") end),
>     awful.key({ modkey,           }, "e", function () awful.util.spawn("nautilus --no-desktop") end),
>     awful.key({ modkey,           }, "F1", function () awful.util.spawn("qdbus org.mpris.MediaPlayer2.clementine /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Previous") end),
>     awful.key({ modkey,           }, "F2", function () awful.util.spawn("qdbus org.mpris.MediaPlayer2.clementine /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.PlayPause") end),
> 	-- "play" restart the current playing song
>     awful.key({ modkey,           }, "F3", function () awful.util.spawn("qdbus org.mpris.MediaPlayer2.clementine /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Play") end),
>     awful.key({ modkey,           }, "F4", function () awful.util.spawn("qdbus org.mpris.MediaPlayer2.clementine /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Next") end),
>     --awful.key({ modkey,           }, "F5", function () awful.util.spawn("amixer -D pulse set Master 5%-") end),
>     --awful.key({ modkey,           }, "F6", function () awful.util.spawn("amixer -D pulse set Master 5%+") end),
>     awful.key({ modkey,           }, "F5", function () dec_volume(volume_widget) end),
>     awful.key({ modkey,           }, "F6", function () inc_volume(volume_widget) end),
>     awful.key({ modkey,           }, "F7", function () mute_volume(volume_widget) end), -- toggle mute
>     awful.key({ modkey,           }, "F9", close_last_naughty_msg),
>     awful.key({ modkey,           }, "F10", close_all_naughty_msg),
>     -- suspend notifications
>     awful.key({ modkey,           }, "F11", function() naughty.suspend(); naugthy_widget:set_markup("<span color='red'>✘</span>") end),
>     awful.key({ modkey,           }, "F12", function() naughty.resume(); naugthy_widget:set_text("") end),
>     awful.key({                   }, "F12", function () awful.util.spawn("xscreensaver-command -lock") end),
> 
> 
374a484,487
> 
> 	-- custom rule
> 	{ rule = { class = "Xfce4-appfinder" },
> 	  properties = { floating = true } },
452a566,579
> 
> run_once("xscreensaver -no-splash")
> run_once("redshift-gtk")
> run_once("compton -b --inactive-dim 0.3 --sw-opti --detect-client-leader --focus-exclude \"name ~= 'Eclipse'\"")
> --run_once("compton -b --inactive-dim 0.3 --sw-opti --detect-client-leader --invert-color-include 'g:e:Eclipse'")
> --run_once("sparkleshare start")
> run_once("nm-applet")
> if lfs.attributes(os.getenv("HOME") .. "/.at_home") then
>     run_once("blueman-applet")
> end
> if lfs.attributes(os.getenv("HOME") .. "/.at_work") then
>     run_once("hqtray")
>     --run_once("xrandr --output DVI-I-1 --left-of VGA-0")
> end

